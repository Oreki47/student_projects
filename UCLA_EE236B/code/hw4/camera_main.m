clc;clear;
P1 = [1, 0, 0, 0; 0, 1, 0, 0; 0, 0, 1, 0];
P2 = [1, 0, 0, 0; 0, 0, 1, 0; 0, -1, 0, 10];
P3 = [1, 1, 1, -10; -1, 1, 1, 0; -1, -1, 1, 10];
P4 = [0, 1, 1, 0; 0, -1, 1, 0; -1, 0, 0, 10];
y1 = [0.98; 0.93];
y2 = [1.01; 1.01];
y3 = [0.95; 1.05];
y4 = [2.04; 0.00];
a = 0;
b = 1;
t = (a+b)/2;
tol = 1e-4; 
while b-a > tol
    cvx_begin
        variable x(3)
        subject to
            norm(P1(1:2, 1:3)*x + P1(1:2, 4) - (P1(3, 1:3)*x + P1(3, 4))*y1, 2)...
                - t*(P1(3, 1:3)*x + P1(3, 4)) <= 0
            norm(P2(1:2, 1:3)*x + P2(1:2, 4) - (P2(3, 1:3)*x + P2(3, 4))*y2, 2)...
                - t*(P2(3, 1:3)*x + P2(3, 4)) <= 0
            norm(P3(1:2, 1:3)*x + P3(1:2, 4) - (P3(3, 1:3)*x + P3(3, 4))*y3, 2)...
                - t*(P3(3, 1:3)*x + P3(3, 4)) <= 0
            norm(P4(1:2, 1:3)*x + P4(1:2, 4) - (P4(3, 1:3)*x + P4(3, 4))*y4, 2)...
                - t*(P4(3, 1:3)*x + P4(3, 4)) <= 0
    cvx_end
    if cvx_optval == Inf
        a = t;
    else
        b = t;
    end
    t = (a+b)/2;
end